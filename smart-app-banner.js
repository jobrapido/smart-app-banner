(function(l){"object"===typeof exports&&"undefined"!==typeof module?module.exports=l():"function"===typeof define&&define.amd?define([],l):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SmartBanner=l()})(function(){return function c(f,g,e){function b(h,d){if(!g[h]){if(!f[h]){var k="function"==typeof require&&require;if(!d&&k)return k(h,!0);if(a)return a(h,!0);k=Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k;}k=g[h]=
{exports:{}};f[h][0].call(k.exports,function(a){var d=f[h][1][a];return b(d?d:a)},k,k.exports,c,f,g,e)}return g[h].exports}for(var a="function"==typeof require&&require,d=0;d<e.length;d++)b(e[d]);return b}({1:[function(c,f,g){var e=c("xtend/mutable"),b=c("component-query"),a=c("get-doc"),d=a&&a.documentElement,h=c("cookie-cutter"),m={ios:{appMeta:"apple-itunes-app-meta",iconRels:["apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return this.options.url.ios}},android:{appMeta:"google-play-app",
iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return this.options.url.android}}};c=function(a){var b=navigator.userAgent;this.options=e({},{daysHidden:15,daysReminder:90,appStoreLanguage:"us",button:"OPEN",store:{ios:"On the App Store",android:"In Google Play"},price:{ios:"FREE",android:"FREE"},force:!1},a||{});if(this.options.force)this.type=this.options.force;else if(null!==b.match(/iPad|iPhone|iPod/i)){if(null!==b.match(/Safari/i)||null!==
b.match(/CriOS/i)||6>Number(b.substr(b.indexOf("OS ")+3,3).replace("_",".")))this.type="ios"}else null!==b.match(/Android/i)&&(this.type="android");!this.type||navigator.standalone||h.get("smartbanner-closed")||h.get("smartbanner-installed")||(e(this,m[this.type]),this.parseAppId()&&(this.create(),this.show()))};c.prototype={constructor:c,create:function(){var d=this.getStoreLink(),h=this.options.price[this.type]+" - "+this.options.store[this.type];if(this.options.icon)var c=this.options.icon;else for(var e=
0;e<this.iconRels.length;e++){var g=b('link[rel="'+this.iconRels[e]+'"]');if(g){c=g.getAttribute("href");break}}var f=a.createElement("div");f.className="smartbanner smartbanner-"+this.type;f.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+c+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+'</div><div class="smartbanner-description">'+
this.options.description+"</div><div>"+this.options.author+"</div><span>"+h+'</span></div><a href="'+d+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>";a.querySelector(".body-wrapper")?(a.querySelector(".body-wrapper").appendChild(f),a.body.classList.add("smart-banner")):a&&a.addEventListener("DOMContentLoaded",function(){a.querySelector(".body-wrapper").appendChild(f);a.body.classList.add("smart-banner")});b(".smartbanner-button",f).addEventListener("click",
this.install.bind(this),!1);b(".smartbanner-close",f).addEventListener("click",this.close.bind(this),!1)},hide:function(){d.classList.remove("smartbanner-show")},show:function(){d.classList.add("smartbanner-show")},close:function(){this.hide();a.body.classList.remove("smart-banner");h.set("smartbanner-closed","true",{path:"/",expires:+new Date+864E5*this.options.daysHidden})},install:function(){this.hide();h.set("smartbanner-installed","true",{path:"/",expires:+new Date+864E5*this.options.daysReminder})},
parseAppId:function(){var a=b('meta[name="'+this.appMeta+'"]');if(a)return this.appId="windows"===this.type?a.getAttribute("content"):/app-id=([^\s,]+)/.exec(a.getAttribute("content"))[1]}};f.exports=c},{"component-query":2,"cookie-cutter":3,"get-doc":4,"xtend/mutable":6}],2:[function(c,f,g){function e(b,a){return a.querySelector(b)}g=f.exports=function(b,a){a=a||document;return e(b,a)};g.all=function(b,a){a=a||document;return a.querySelectorAll(b)};g.engine=function(b){if(!b.one)throw Error(".one callback required");
if(!b.all)throw Error(".all callback required");e=b.one;g.all=b.all;return g}},{}],3:[function(c,f,g){g=f.exports=function(e){e||(e={});"string"===typeof e&&(e={cookie:e});void 0===e.cookie&&(e.cookie="");return{get:function(b){for(var a=e.cookie.split(/;\s*/),d=0;d<a.length;d++){var c=a[d].split("=");if(unescape(c[0])===b)return unescape(c[1])}},set:function(b,a,d){d||(d={});b=escape(b)+"="+escape(a);d.expires&&(b+="; expires="+d.expires);d.path&&(b+="; path="+escape(d.path));return e.cookie=b}}};
"undefined"!==typeof document&&(c=g(document),g.get=c.get,g.set=c.set)},{}],4:[function(c,f,g){c=c("has-dom");f.exports=c()?document:null},{"has-dom":5}],5:[function(c,f,g){f.exports=function(){return"undefined"!==typeof window&&"undefined"!==typeof document&&"function"===typeof document.createElement}},{}],6:[function(c,f,g){f.exports=function(b){for(var a=1;a<arguments.length;a++){var d=arguments[a],c;for(c in d)e.call(d,c)&&(b[c]=d[c])}return b};var e=Object.prototype.hasOwnProperty},{}]},{},[1])(1)});
